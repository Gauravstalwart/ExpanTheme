{%- if section.settings.image != blank -%}
  {%- style -%}
    @media screen and (max-width: 768px) {
      .loaded.background-media-text--{{ section.id }} {
        background-image: url({{ section.settings.image | img_url: '350x350', crop: 'center' }});
        background-size: cover;
        background-position: 50% 50%;
      }
    }
  {%- endstyle -%}
{%- endif -%}
{%- assign current_variant = product.selected_or_first_available_variant -%}
<div
  data-section-id="{{ section.id }}"
  data-section-type="background-image"
  class="background-media-text three-fifths background-media-text--{{ section.id }} background-media-text--{{ section.settings.height }}"
  {% if section.settings.parallax %}data-parallax="true"{% endif %}>
  
  <div class="background-media-text__container">
    {%- if section.settings.parallax -%}
      <parallax-image class="parallax-container">
        <div class="parallax-image" data-movement="15%" data-parallax-image data-angle="{{ section.settings.parallax_direction }}">
    {%- endif -%}
      {% assign featured_media = product.selected_or_first_available_variant.featured_media | default: product.featured_media %}
      {%- if featured_media != blank -%}
        {% assign classes = 'image-fit background-media-text__image background-media-text__image--' | append: section.id %}
        {% render 'image-element'
          img: featured_media,
          img_width: 2400,
          classes: classes,
          alt: featured_media.alt,
          sizes: '100%'
        %}
      {%- else -%}
        {{ 'lifestyle-1' | placeholder_svg_tag: 'placeholder-svg' }}
      {%- endif -%}

    {%- if section.settings.parallax -%}
        </div>
      </parallax-image>
    {%- endif -%}
  </div>
  </div>

     <div class="sidebar-book">
              <div class="sidebar-overlay"></div>
              <div class="book-now-btn">x</div>
              <div class="sidebar-inner-content">
               {% comment %} sidebar faq start {% endcomment %}
              <div class="kit-heading">
                <h2>Book Now</h2>
              </div>
              <div class="kits-list-wrapper">
                <div class="kit-block">
                  <div class="left-date">
                    <h2 class="number">17</h2>
                    <small class="date">Oct, 2022</small>
                    <span class="time">09:00 - 17:00</span>
                    <img src="https://cdn.shopify.com/s/files/1/0638/2361/0076/files/flag.svg?v=1665388456" width="15" title="Nederland" alt="" />
                  </div>                  
                  <div class="kit-info">
                    <div class="kit-title">Amstelveen</div>
                    <div class="kit-size">Nederland</div>
                    <p class="kit-text">There are <b>2</b> places available</p>
                    <div class="book-btn">
                      <a href="#" class="btn">Sign-up</a>
                    </div>
                  </div>
                </div>
                <div class="kit-block">
                  <div class="left-date">
                    <h2 class="number">10</h2>
                    <small class="date">Oct, 2022</small>
                    <span class="time">09:00 - 17:00</span>
                    <img src="https://cdn.shopify.com/s/files/1/0638/2361/0076/files/flag.svg?v=1665388456" width="15" title="Nederland" alt="" />
                  </div>                  
                  <div class="kit-info">
                    <div class="kit-title">BUNSCHOTEN-SPAKENBURG</div>
                    <div class="kit-size">Nederland</div>
                    <p class="kit-text">There are <b>2</b> places available</p>
                    <div class="book-btn">
                      <a href="#" class="btn">Sign-up</a>
                    </div>
                  </div>
                </div>
                <div class="kit-block">
                  <div class="left-date">
                    <h2 class="number">22</h2>
                    <small class="date">Oct, 2022</small>
                    <span class="time">09:00 - 17:00</span>
                    <img src="https://cdn.shopify.com/s/files/1/0638/2361/0076/files/flag.svg?v=1665388456" width="15" title="Nederland" alt="" />
                  </div>                  
                  <div class="kit-info">
                    <div class="kit-title">Amstelveen</div>
                    <div class="kit-size">Nederland</div>
                    <p class="kit-text">There are <b>2</b> places available</p>
                    <div class="book-btn">
                      <a href="#" class="btn">Sign-up</a>
                    </div>
                  </div>
                </div>
                <div class="kit-block">
                  <div class="left-date">
                    <h2 class="number">30</h2>
                    <small class="date">Oct, 2022</small>
                    <span class="time">09:00 - 17:00</span>
                    <img src="https://cdn.shopify.com/s/files/1/0638/2361/0076/files/flag.svg?v=1665388456" width="15" title="Nederland" alt="" />
                  </div>                  
                  <div class="kit-info">
                    <div class="kit-title">Amstelveen</div>
                    <div class="kit-size">Nederland</div>
                    <p class="kit-text">There are <b>2</b> places available</p>
                    <div class="book-btn">
                      <a href="#" class="btn">Sign-up</a>
                    </div>
                  </div>
                </div>
              </div>
{% comment %} sidebar faq end {% endcomment %}
              </div>
             </div>   
  
  {%- if section.settings.subtitle != blank or section.settings.title != blank or section.settings.text != blank -%}
    <div class="background-media-text__inner two-fifths">
      <div class="background-media-text__aligner background-media-text--{{ section.settings.layout }}">
        <div class="animation-contents">
          <div class="background-media-text__text">
            {%- if section.settings.title != blank -%}
              <p class="h3">{{ section.settings.title | escape }}</p>
            {%- endif -%}
            {% if product != blank %}
            <div class="product_title_price_wrap">
             <p class="h3">{{ product.title | escape }}</p>
             <div class="product-block product-block--price">
                      {%- assign hide_sale_price = true -%}
                      {%- if product.compare_at_price_max > product.price -%}
                        {%- if current_variant.compare_at_price > current_variant.price -%}
                          {%- assign hide_sale_price = false -%}
                        {%- endif -%}
                        <span
                          data-a11y-price
                          class="visually-hidden"
                          aria-hidden="{{ hide_sale_price }}">
                            {{ 'products.general.regular_price' | t }}
                        </span>
                        <span data-product-price-wrap class="{% if hide_sale_price %} hide{% endif %}">
                          <span data-compare-price class="product__price product__price--compare">
                            {%- if current_variant.compare_at_price > current_variant.price -%}
                              {%- render 'price' with current_variant.compare_at_price -%}
                            {%- endif -%}
                          </span>
                        </span>
                        <span data-compare-price-a11y class="visually-hidden">{{ 'products.general.sale_price' | t }}</span>
                      {%- else -%}
                        <span id="PriceA11y-{{ section_id }}" class="visually-hidden">{{ 'products.general.regular_price' | t }}</span>
                      {%- endif -%}

                      <span data-product-price
                        class="product__price{% if current_variant.compare_at_price > current_variant.price %} on-sale{% endif %}">
                        {%- unless product.empty? -%}
                          {%- render 'price' with current_variant.price -%}
                        {%- else -%}
                          {%- render 'price' with 1999 -%}
                        {%- endunless -%}
                      </span>

                      {%- if settings.product_save_amount -%}
                        {%- if settings.product_save_type == 'dollar' -%}
                          {%- capture saved_amount -%}{{ current_variant.compare_at_price | minus: current_variant.price | money_without_trailing_zeros }}{%- endcapture -%}
                        {%- else -%}
                          {%- capture saved_amount -%}{{ current_variant.compare_at_price | minus: current_variant.price | times: 100.0 | divided_by: current_variant.compare_at_price | round }}%{%- endcapture -%}
                        {%- endif -%}
                        <span data-save-price class="product__price-savings{% if hide_sale_price %} hide{% endif %}">
                          {%- unless hide_sale_price -%}
                            {{ 'products.general.save_html' | t: saved_amount: saved_amount }}
                          {%- endunless -%}
                        </span>
                      {%- endif -%}

                      <div data-unit-price-wrapper class="product__unit-price{% unless current_variant.unit_price_measurement %} hide{% endunless %}">
                        {%- capture unit_price_base_unit -%}
                          <span data-unit-base>
                            {%- if current_variant.unit_price_measurement -%}
                              {%- if current_variant.unit_price_measurement.reference_value != 1 -%}
                                {{ current_variant.unit_price_measurement.reference_value }}
                              {%- endif -%}
                              {{ current_variant.unit_price_measurement.reference_unit }}
                            {%- endif -%}
                          </span>
                        {%- endcapture -%}

                        <span data-unit-price>
                          {%- render 'price' with current_variant.unit_price -%}
                        </span>/{{ unit_price_base_unit }}
                      </div>
                    </div>
            </div>
             {% endif %}
            {%- if section.settings.subtitle != blank -%}
              <p class="accent-subtitle">{{ section.settings.subtitle }}</p>
            {%- endif -%}
            {%- if section.settings.text != blank -%}
              <div class="rte background-media-text__subtext">{{ section.settings.text }}</div>
            {%- endif -%}
          
            {%- if section.settings.button_label != blank -%}
              <div class="product_cart_btn">
              <div href="{{ section.settings.button_link }}" class="btn book-now-btn">
                {{ section.settings.button_label }}
              </div>
              </div>
            {%- endif -%}
            <div class="product-list-main">
            {%- if section.blocks.size > 0 -%}
             {%- for block in section.blocks -%}
               <div class="logo_text_block_wrap">
                {%- if block.settings.image != blank -%}
                <img class="product__block_image"
                     src="{{ block.settings.image | img_url: 'master' }}"
                    alt="{{ block.settings.image.alt }}">               
              {%- endif -%}
              {%- if block.settings.text != blank -%}
                  <div class="product_block_text">
                    <h4 class="logo__title">{{ block.settings.text | escape }}</h4>
                  </div>
                {%- endif -%}
               </div>  
             {%- endfor -%}  
          {%- endif -%} 
              </div>
          </div>
        </div>
      </div>
    </div>
  {%- endif -%}

{% schema %}
{
  "name": "Pruduct Image with Text",
  "class": "index-section--flush product-banner-with-text",
  "settings": [
    {
      "type": "text",
      "id": "subtitle",
      "label": "t:sections.background-image-text.settings.subtitle.label"
    },
    {
      "type": "text",
      "id": "title",
      "label": "t:sections.background-image-text.settings.title.label",
      "default": "Large image with text box"
    },
    {
      "type": "richtext",
      "id": "text",
      "label": "t:sections.background-image-text.settings.text.label",
      "default": "<p>Pair large text with a full-width image to draw attention to an important detail of your brand or product line.</p>"
    },
    {
      "type": "text",
      "id": "button_label",
      "label": "t:sections.background-image-text.settings.button_label.label"
    },
    {
      "type": "image_picker",
      "id": "image",
      "label": "t:sections.background-image-text.settings.image.label"
    },
    {
      "type": "select",
      "id": "focal_point",
      "label": "t:sections.background-image-text.settings.focal_point.label",
      "info": "t:sections.background-image-text.settings.focal_point.info",
      "default": "center",
      "options": [
        {
          "value": "20% 0",
          "label": "t:sections.background-image-text.settings.focal_point.options.20_0.label"
        },
        {
          "value": "top",
          "label": "t:sections.background-image-text.settings.focal_point.options.top.label"
        },
        {
          "value": "80% 0",
          "label": "t:sections.background-image-text.settings.focal_point.options.80_0.label"
        },
        {
          "value": "20% 50%",
          "label": "t:sections.background-image-text.settings.focal_point.options.20_50.label"
        },
        {
          "value": "center",
          "label": "t:sections.background-image-text.settings.focal_point.options.center.label"
        },
        {
          "value": "80% 50%",
          "label": "t:sections.background-image-text.settings.focal_point.options.80_50.label"
        },
        {
          "value": "20% 100%",
          "label": "t:sections.background-image-text.settings.focal_point.options.20_100.label"
        },
        {
          "value": "bottom",
          "label": "t:sections.background-image-text.settings.focal_point.options.bottom.label"
        },
        {
          "value": "80% 100%",
          "label": "t:sections.background-image-text.settings.focal_point.options.80_100.label"
        }
      ]
    },
    {
      "type": "select",
      "id": "layout",
      "label": "t:sections.background-image-text.settings.layout.label",
      "default": "left",
      "options": [
        {
          "value": "left",
          "label": "t:sections.background-image-text.settings.layout.options.left.label"
        },
        {
          "value": "right",
          "label": "t:sections.background-image-text.settings.layout.options.right.label"
        }
      ]
    },
    {
      "type": "range",
      "id": "height",
      "label": "t:sections.background-image-text.settings.height.label",
      "default": 550,
      "min": 450,
      "max": 750,
      "step": 100,
      "unit": "px"
    },
    {
      "type": "checkbox",
      "id": "parallax",
      "label": "t:sections.background-image-text.settings.parallax.label"
    },
    {
      "type": "select",
      "id": "parallax_direction",
      "label": "t:sections.background-image-text.settings.parallax_direction.label",
      "default": "top",
      "options": [
        {
          "value": "top",
          "label": "t:sections.background-image-text.settings.parallax_direction.options.top.label"
        },
        {
          "value": "left",
          "label": "t:sections.background-image-text.settings.parallax_direction.options.left.label"
        }
      ]
    }
  ],
    "blocks": [
    {
      "type": "text",
      "name": "Text",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "t:sections.logo-list.blocks.logo.settings.image.label",
          "info": "t:sections.logo-list.blocks.logo.settings.image.info"
        },
        {
          "type": "text",
          "id": "text",
          "label": "Text"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Product Large Image with Text"
    }
  ]
}
{% endschema %}
